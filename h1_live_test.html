<!DOCTYPE html>
<html>
<head>
    <title>H1 Debug</title>
</head>
<body>
    <h1>H1 Debug Test</h1>
    <div id="result"></div>
    
    <script>
        function checkH1() {
            // Simulate going to action page
            const iframe = document.createElement('iframe');
            iframe.src = 'action.html';
            iframe.style.display = 'none';
            document.body.appendChild(iframe);
            
            iframe.onload = function() {
                try {
                    const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                    const firstHeaderField = iframeDoc.querySelector('.header-field:first-child');
                    
                    document.getElementById('result').innerHTML = `
                        <p><strong>Live H1 field content:</strong> "${firstHeaderField ? firstHeaderField.textContent : 'NOT FOUND'}"</p>
                        <p><strong>Live H1 field innerHTML:</strong> "${firstHeaderField ? firstHeaderField.innerHTML : 'NOT FOUND'}"</p>
                        <p><strong>Mode from localStorage:</strong> "${localStorage.getItem('mode') || 'NULL'}"</p>
                    `;
                } catch (error) {
                    document.getElementById('result').innerHTML = `<p>Error: ${error}</p>`;
                } finally {
                    document.body.removeChild(iframe);
                }
            };
        }
        
        // Run test after 1 second
        setTimeout(checkH1, 1000);
    </script>
</body>
</html>
